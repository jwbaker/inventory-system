{% load uw_forms_format_tags %}

<tr class="file-row {% if form.errors %}danger{% endif %} {% if not form.instance.to_display %}disabled{% endif %}">
  <td class="file-description">
    <a href="{% url 'uw_file_io.views.file_view' form.instance.file_field.name %}">
      {{ form.instance.get_name_display|filename }}
    </a>
  </td>
  <td class="file-size">{{ form.initial.file_field.size|filesizeformat }}</td>

  {% if can_edit %}
    <td colspan="2" class="hidden">
      {{ form.as_p }}
      <span class="default-description persist-hidden">{{ form.initial.description }}</span>
      <span class="initial-display persist-hidden">{{ form.initial.to_display }}</span>
    </td>
  {% endif %}
  <td class="file-menu">
    <i class="file-download"
       data-target="{% url 'uw_file_io.views.file_download' form.instance.id %}">
    </i>
    {% if can_edit %}
      <i class="file-edit"></i>
      {% if form.instance.to_display %}
        <i class="file-hide"></i>
      {% else %}
        <i class="restore"></i>
      {% endif %}
    {% endif %}
  </td>

  {% if can_edit %}
    <td class="hidden file-menu">
      <i class="save"></i>
      <i class="cancel"></i>
      {% if form.instance.to_display %}
        <i class="file-hide"></i>
      {% else %}
        <i class="restore"></i>
      {% endif %}
    </td>
  {% endif %}
</tr>