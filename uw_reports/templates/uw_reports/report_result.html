{% load uw_reports_misc_tags %}

<p>{{ results|length }} result{{ results|pluralize }}</p>
<table class="table" id="query-result">
  <thead>
    {% for field in display_fields %}
      <td>{{ field }}</td>
    {% endfor %}
  </thead> 
  <tbody>
    {% for item in results %}
      <tr>
        {% for field in display_fields %}
          {% ifequal field 'status' %} 
            <td>{{ item.get_status_display }}</td>
          {% else %}
            {% with field_id=field|to_id %}
              <td>{{ item|get:field_id }}</td>
            {% endwith %}
          {% endifequal %}
        {% endfor %}
      </tr>
    {% endfor %}
  </tbody>
</table>