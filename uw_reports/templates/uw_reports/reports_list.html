{% extends 'uw_inventory_system/base.html' %}

{% block css_includes %}
  <!-- DataTables -->
  <link rel="stylesheet" href="http://cdn.datatables.net/1.10.4/css/jquery.dataTables.min.css">
  <link rel="stylesheet" href="http://cdn.datatables.net/plug-ins/3cfcc339e89/integration/bootstrap/3/dataTables.bootstrap.css">

  <style type="text/css">
    {# Make the whole row look clickable #}
    table#reports-table tbody tr:hover{
      cursor: pointer;
    }
  </style>
{% endblock css_includes %}

{% block content %}
  <div class="row">
    <table id="reports-table" class="table table-condensed table-hover">
      <thead>
        <tr>
          <td>Creation Date</td>
          <td>Name</td>
          <td>Creator</td>
        </tr>
      </thead>
      <tbody>
        {% for report in reports_list %}
          <tr>
            <td>{{ report.creation_date }}</td>
            <td>
              <a href="{% url 'uw_reports.views.view_report' report.id %}" class="report-detail"></a>
              {{ report.name }}
            </td>
            <td>{{ report.creator }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% endblock content %}

{% block js_includes %}
  <!-- DataTables -->
  <script src="http://cdn.datatables.net/1.10.4/js/jquery.dataTables.min.js"></script>
  <script src="http://cdn.datatables.net/plug-ins/3cfcc339e89/integration/bootstrap/3/dataTables.bootstrap.js"></script>

  <script type="text/javascript">
    var dataTable = $('table#reports-table').DataTable();
  </script>
  <script type="text/javascript">
    {# If we click anywhere in a row, we want to trigger the link contained in that row #}
    $('tbody').on('click', 'tr', function(){
      window.location = $(this).find('a.report-detail').attr('href');
    })
  </script>

{% endblock js_includes %}
