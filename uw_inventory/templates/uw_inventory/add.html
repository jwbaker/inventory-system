{% extends 'uw_inventory/item_base.html' %}
{% load uw_inventory_extras %}

{% block page_heading %}New Item{% endblock page_heading %}

{% block page_body %}
  <form action="{% url 'uw_inventory.views.inventory_new' %}" method="post" id="itemForm">
    {% csrf_token %}
    {% show_field 'text' 'Name' %}
    {% show_field 'dropdown' 'Status' %}
    {% show_field 'currency' 'Purchase Price' %}
    {% show_field 'textarea' 'Description' %}
  </form>
{% endblock page_body %}

{% block js_includes %}
  {{ block.super }}
  <script type="text/javascript">
    $('#pageSave').click(function(){
      $('form#itemForm').submit();
    });
  </script>

  <script type="text/javascript">
    var onChangeHandler = function(event){
      if(event.target.value === ''){
        pageDirty = false;
      } else{
        pageDirty = true;
      }

      console.log(pageDirty);
    }

    $('select').change(onChangeHandler);
    $('input').change(onChangeHandler);
    $('textarea').change(onChangeHandler);
  </script>
{% endblock js_includes %}